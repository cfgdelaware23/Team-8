"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _metadataParser = require("./metadata-parser");
var _dataType = require("./data-type");
var _iconvLite = _interopRequireDefault(require("iconv-lite"));
var _sprintfJs = require("sprintf-js");
var _guidParser = require("./guid-parser");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const NULL = (1 << 16) - 1;
const MAX = (1 << 16) - 1;
const THREE_AND_A_THIRD = 3 + 1 / 3;
const MONEY_DIVISOR = 10000;
const PLP_NULL = Buffer.from([0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF]);
const UNKNOWN_PLP_LEN = Buffer.from([0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF]);
const DEFAULT_ENCODING = 'utf8';
function readTinyInt(parser, callback) {
  parser.readUInt8(callback);
}
function readSmallInt(parser, callback) {
  parser.readInt16LE(callback);
}
function readInt(parser, callback) {
  parser.readInt32LE(callback);
}
function readBigInt(parser, callback) {
  parser.readBigInt64LE(value => {
    callback(value.toString());
  });
}
function readReal(parser, callback) {
  parser.readFloatLE(callback);
}
function readFloat(parser, callback) {
  parser.readDoubleLE(callback);
}
function readSmallMoney(parser, callback) {
  parser.readInt32LE(value => {
    callback(value / MONEY_DIVISOR);
  });
}
function readMoney(parser, callback) {
  parser.readInt32LE(high => {
    parser.readUInt32LE(low => {
      callback((low + 0x100000000 * high) / MONEY_DIVISOR);
    });
  });
}
function readBit(parser, callback) {
  parser.readUInt8(value => {
    callback(!!value);
  });
}
function valueParse(parser, metadata, options, callback) {
  const type = metadata.type;
  switch (type.name) {
    case 'Null':
      return callback(null);
    case 'TinyInt':
      return readTinyInt(parser, callback);
    case 'SmallInt':
      return readSmallInt(parser, callback);
    case 'Int':
      return readInt(parser, callback);
    case 'BigInt':
      return readBigInt(parser, callback);
    case 'IntN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 1:
            return readTinyInt(parser, callback);
          case 2:
            return readSmallInt(parser, callback);
          case 4:
            return readInt(parser, callback);
          case 8:
            return readBigInt(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for IntN');
        }
      });
    case 'Real':
      return readReal(parser, callback);
    case 'Float':
      return readFloat(parser, callback);
    case 'FloatN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 4:
            return readReal(parser, callback);
          case 8:
            return readFloat(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for FloatN');
        }
      });
    case 'SmallMoney':
      return readSmallMoney(parser, callback);
    case 'Money':
      return readMoney(parser, callback);
    case 'MoneyN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 4:
            return readSmallMoney(parser, callback);
          case 8:
            return readMoney(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for MoneyN');
        }
      });
    case 'Bit':
      return readBit(parser, callback);
    case 'BitN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 1:
            return readBit(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for BitN');
        }
      });
    case 'VarChar':
    case 'Char':
      const codepage = metadata.collation.codepage;
      if (metadata.dataLength === MAX) {
        return readMaxChars(parser, codepage, callback);
      } else {
        return parser.readUInt16LE(dataLength => {
          if (dataLength === NULL) {
            return callback(null);
          }
          readChars(parser, dataLength, codepage, callback);
        });
      }
    case 'NVarChar':
    case 'NChar':
      if (metadata.dataLength === MAX) {
        return readMaxNChars(parser, callback);
      } else {
        return parser.readUInt16LE(dataLength => {
          if (dataLength === NULL) {
            return callback(null);
          }
          readNChars(parser, dataLength, callback);
        });
      }
    case 'VarBinary':
    case 'Binary':
      if (metadata.dataLength === MAX) {
        return readMaxBinary(parser, callback);
      } else {
        return parser.readUInt16LE(dataLength => {
          if (dataLength === NULL) {
            return callback(null);
          }
          readBinary(parser, dataLength, callback);
        });
      }
    case 'Text':
      return parser.readUInt8(textPointerLength => {
        if (textPointerLength === 0) {
          return callback(null);
        }
        parser.readBuffer(textPointerLength, _textPointer => {
          parser.readBuffer(8, _timestamp => {
            parser.readUInt32LE(dataLength => {
              readChars(parser, dataLength, metadata.collation.codepage, callback);
            });
          });
        });
      });
    case 'NText':
      return parser.readUInt8(textPointerLength => {
        if (textPointerLength === 0) {
          return callback(null);
        }
        parser.readBuffer(textPointerLength, _textPointer => {
          parser.readBuffer(8, _timestamp => {
            parser.readUInt32LE(dataLength => {
              readNChars(parser, dataLength, callback);
            });
          });
        });
      });
    case 'Image':
      return parser.readUInt8(textPointerLength => {
        if (textPointerLength === 0) {
          return callback(null);
        }
        parser.readBuffer(textPointerLength, _textPointer => {
          parser.readBuffer(8, _timestamp => {
            parser.readUInt32LE(dataLength => {
              readBinary(parser, dataLength, callback);
            });
          });
        });
      });
    case 'Xml':
      return readMaxNChars(parser, callback);
    case 'SmallDateTime':
      return readSmallDateTime(parser, options.useUTC, callback);
    case 'DateTime':
      return readDateTime(parser, options.useUTC, callback);
    case 'DateTimeN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 4:
            return readSmallDateTime(parser, options.useUTC, callback);
          case 8:
            return readDateTime(parser, options.useUTC, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for DateTimeN');
        }
      });
    case 'Time':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readTime(parser, dataLength, metadata.scale, options.useUTC, callback);
        }
      });
    case 'Date':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readDate(parser, options.useUTC, callback);
        }
      });
    case 'DateTime2':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readDateTime2(parser, dataLength, metadata.scale, options.useUTC, callback);
        }
      });
    case 'DateTimeOffset':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readDateTimeOffset(parser, dataLength, metadata.scale, callback);
        }
      });
    case 'NumericN':
    case 'DecimalN':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readNumeric(parser, dataLength, metadata.precision, metadata.scale, callback);
        }
      });
    case 'UniqueIdentifier':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 0x10:
            return readUniqueIdentifier(parser, options, callback);
          default:
            throw new Error((0, _sprintfJs.sprintf)('Unsupported guid size %d', dataLength - 1));
        }
      });
    case 'UDT':
      return readMaxBinary(parser, callback);
    case 'Variant':
      return parser.readUInt32LE(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        }
        readVariant(parser, options, dataLength, callback);
      });
    default:
      throw new Error((0, _sprintfJs.sprintf)('Unrecognised type %s', type.name));
  }
}
function readUniqueIdentifier(parser, options, callback) {
  parser.readBuffer(0x10, data => {
    callback(options.lowerCaseGuids ? (0, _guidParser.bufferToLowerCaseGuid)(data) : (0, _guidParser.bufferToUpperCaseGuid)(data));
  });
}
function readNumeric(parser, dataLength, _precision, scale, callback) {
  parser.readUInt8(sign => {
    sign = sign === 1 ? 1 : -1;
    let readValue;
    if (dataLength === 5) {
      readValue = parser.readUInt32LE;
    } else if (dataLength === 9) {
      readValue = parser.readUNumeric64LE;
    } else if (dataLength === 13) {
      readValue = parser.readUNumeric96LE;
    } else if (dataLength === 17) {
      readValue = parser.readUNumeric128LE;
    } else {
      throw new Error((0, _sprintfJs.sprintf)('Unsupported numeric dataLength %d', dataLength));
    }
    readValue.call(parser, value => {
      callback(value * sign / Math.pow(10, scale));
    });
  });
}
function readVariant(parser, options, dataLength, callback) {
  return parser.readUInt8(baseType => {
    const type = _dataType.TYPE[baseType];
    return parser.readUInt8(propBytes => {
      dataLength = dataLength - propBytes - 2;
      switch (type.name) {
        case 'UniqueIdentifier':
          return readUniqueIdentifier(parser, options, callback);
        case 'Bit':
          return readBit(parser, callback);
        case 'TinyInt':
          return readTinyInt(parser, callback);
        case 'SmallInt':
          return readSmallInt(parser, callback);
        case 'Int':
          return readInt(parser, callback);
        case 'BigInt':
          return readBigInt(parser, callback);
        case 'SmallDateTime':
          return readSmallDateTime(parser, options.useUTC, callback);
        case 'DateTime':
          return readDateTime(parser, options.useUTC, callback);
        case 'Real':
          return readReal(parser, callback);
        case 'Float':
          return readFloat(parser, callback);
        case 'SmallMoney':
          return readSmallMoney(parser, callback);
        case 'Money':
          return readMoney(parser, callback);
        case 'Date':
          return readDate(parser, options.useUTC, callback);
        case 'Time':
          return parser.readUInt8(scale => {
            return readTime(parser, dataLength, scale, options.useUTC, callback);
          });
        case 'DateTime2':
          return parser.readUInt8(scale => {
            return readDateTime2(parser, dataLength, scale, options.useUTC, callback);
          });
        case 'DateTimeOffset':
          return parser.readUInt8(scale => {
            return readDateTimeOffset(parser, dataLength, scale, callback);
          });
        case 'VarBinary':
        case 'Binary':
          return parser.readUInt16LE(_maxLength => {
            readBinary(parser, dataLength, callback);
          });
        case 'NumericN':
        case 'DecimalN':
          return parser.readUInt8(precision => {
            parser.readUInt8(scale => {
              readNumeric(parser, dataLength, precision, scale, callback);
            });
          });
        case 'VarChar':
        case 'Char':
          return parser.readUInt16LE(_maxLength => {
            (0, _metadataParser.readCollation)(parser, collation => {
              readChars(parser, dataLength, collation.codepage, callback);
            });
          });
        case 'NVarChar':
        case 'NChar':
          return parser.readUInt16LE(_maxLength => {
            (0, _metadataParser.readCollation)(parser, _collation => {
              readNChars(parser, dataLength, callback);
            });
          });
        default:
          throw new Error('Invalid type!');
      }
    });
  });
}
function readBinary(parser, dataLength, callback) {
  return parser.readBuffer(dataLength, callback);
}
function readChars(parser, dataLength, codepage, callback) {
  if (codepage == null) {
    codepage = DEFAULT_ENCODING;
  }
  return parser.readBuffer(dataLength, data => {
    callback(_iconvLite.default.decode(data, codepage));
  });
}
function readNChars(parser, dataLength, callback) {
  parser.readBuffer(dataLength, data => {
    callback(data.toString('ucs2'));
  });
}
function readMaxBinary(parser, callback) {
  return readMax(parser, callback);
}
function readMaxChars(parser, codepage, callback) {
  if (codepage == null) {
    codepage = DEFAULT_ENCODING;
  }
  readMax(parser, data => {
    if (data) {
      callback(_iconvLite.default.decode(data, codepage));
    } else {
      callback(null);
    }
  });
}
function readMaxNChars(parser, callback) {
  readMax(parser, data => {
    if (data) {
      callback(data.toString('ucs2'));
    } else {
      callback(null);
    }
  });
}
function readMax(parser, callback) {
  parser.readBuffer(8, type => {
    if (type.equals(PLP_NULL)) {
      return callback(null);
    } else if (type.equals(UNKNOWN_PLP_LEN)) {
      return readMaxUnknownLength(parser, callback);
    } else {
      const low = type.readUInt32LE(0);
      const high = type.readUInt32LE(4);
      if (high >= 2 << 53 - 32) {
        console.warn('Read UInt64LE > 53 bits : high=' + high + ', low=' + low);
      }
      const expectedLength = low + 0x100000000 * high;
      return readMaxKnownLength(parser, expectedLength, callback);
    }
  });
}
function readMaxKnownLength(parser, totalLength, callback) {
  const data = Buffer.alloc(totalLength, 0);
  let offset = 0;
  function next(done) {
    parser.readUInt32LE(chunkLength => {
      if (!chunkLength) {
        return done();
      }
      parser.readBuffer(chunkLength, chunk => {
        chunk.copy(data, offset);
        offset += chunkLength;
        next(done);
      });
    });
  }
  next(() => {
    if (offset !== totalLength) {
      throw new Error('Partially Length-prefixed Bytes unmatched lengths : expected ' + totalLength + ', but got ' + offset + ' bytes');
    }
    callback(data);
  });
}
function readMaxUnknownLength(parser, callback) {
  const chunks = [];
  let length = 0;
  function next(done) {
    parser.readUInt32LE(chunkLength => {
      if (!chunkLength) {
        return done();
      }
      parser.readBuffer(chunkLength, chunk => {
        chunks.push(chunk);
        length += chunkLength;
        next(done);
      });
    });
  }
  next(() => {
    callback(Buffer.concat(chunks, length));
  });
}
function readSmallDateTime(parser, useUTC, callback) {
  parser.readUInt16LE(days => {
    parser.readUInt16LE(minutes => {
      let value;
      if (useUTC) {
        value = new Date(Date.UTC(1900, 0, 1 + days, 0, minutes));
      } else {
        value = new Date(1900, 0, 1 + days, 0, minutes);
      }
      callback(value);
    });
  });
}
function readDateTime(parser, useUTC, callback) {
  parser.readInt32LE(days => {
    parser.readUInt32LE(threeHundredthsOfSecond => {
      const milliseconds = Math.round(threeHundredthsOfSecond * THREE_AND_A_THIRD);
      let value;
      if (useUTC) {
        value = new Date(Date.UTC(1900, 0, 1 + days, 0, 0, 0, milliseconds));
      } else {
        value = new Date(1900, 0, 1 + days, 0, 0, 0, milliseconds);
      }
      callback(value);
    });
  });
}
function readTime(parser, dataLength, scale, useUTC, callback) {
  let readValue;
  switch (dataLength) {
    case 3:
      readValue = parser.readUInt24LE;
      break;
    case 4:
      readValue = parser.readUInt32LE;
      break;
    case 5:
      readValue = parser.readUInt40LE;
  }
  readValue.call(parser, value => {
    if (scale < 7) {
      for (let i = scale; i < 7; i++) {
        value *= 10;
      }
    }
    let date;
    if (useUTC) {
      date = new Date(Date.UTC(1970, 0, 1, 0, 0, 0, value / 10000));
    } else {
      date = new Date(1970, 0, 1, 0, 0, 0, value / 10000);
    }
    Object.defineProperty(date, 'nanosecondsDelta', {
      enumerable: false,
      value: value % 10000 / Math.pow(10, 7)
    });
    callback(date);
  });
}
function readDate(parser, useUTC, callback) {
  parser.readUInt24LE(days => {
    if (useUTC) {
      callback(new Date(Date.UTC(2000, 0, days - 730118)));
    } else {
      callback(new Date(2000, 0, days - 730118));
    }
  });
}
function readDateTime2(parser, dataLength, scale, useUTC, callback) {
  readTime(parser, dataLength - 3, scale, useUTC, time => {
    // TODO: 'input' is 'time', but TypeScript cannot find "time.nanosecondsDelta";
    parser.readUInt24LE(days => {
      let date;
      if (useUTC) {
        date = new Date(Date.UTC(2000, 0, days - 730118, 0, 0, 0, +time));
      } else {
        date = new Date(2000, 0, days - 730118, time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());
      }
      Object.defineProperty(date, 'nanosecondsDelta', {
        enumerable: false,
        value: time.nanosecondsDelta
      });
      callback(date);
    });
  });
}
function readDateTimeOffset(parser, dataLength, scale, callback) {
  readTime(parser, dataLength - 5, scale, true, time => {
    parser.readUInt24LE(days => {
      // offset
      parser.readInt16LE(() => {
        const date = new Date(Date.UTC(2000, 0, days - 730118, 0, 0, 0, +time));
        Object.defineProperty(date, 'nanosecondsDelta', {
          enumerable: false,
          value: time.nanosecondsDelta
        });
        callback(date);
      });
    });
  });
}
var _default = valueParse;
exports.default = _default;
module.exports = valueParse;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbWV0YWRhdGFQYXJzZXIiLCJyZXF1aXJlIiwiX2RhdGFUeXBlIiwiX2ljb252TGl0ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfc3ByaW50ZkpzIiwiX2d1aWRQYXJzZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk5VTEwiLCJNQVgiLCJUSFJFRV9BTkRfQV9USElSRCIsIk1PTkVZX0RJVklTT1IiLCJQTFBfTlVMTCIsIkJ1ZmZlciIsImZyb20iLCJVTktOT1dOX1BMUF9MRU4iLCJERUZBVUxUX0VOQ09ESU5HIiwicmVhZFRpbnlJbnQiLCJwYXJzZXIiLCJjYWxsYmFjayIsInJlYWRVSW50OCIsInJlYWRTbWFsbEludCIsInJlYWRJbnQxNkxFIiwicmVhZEludCIsInJlYWRJbnQzMkxFIiwicmVhZEJpZ0ludCIsInJlYWRCaWdJbnQ2NExFIiwidmFsdWUiLCJ0b1N0cmluZyIsInJlYWRSZWFsIiwicmVhZEZsb2F0TEUiLCJyZWFkRmxvYXQiLCJyZWFkRG91YmxlTEUiLCJyZWFkU21hbGxNb25leSIsInJlYWRNb25leSIsImhpZ2giLCJyZWFkVUludDMyTEUiLCJsb3ciLCJyZWFkQml0IiwidmFsdWVQYXJzZSIsIm1ldGFkYXRhIiwib3B0aW9ucyIsInR5cGUiLCJuYW1lIiwiZGF0YUxlbmd0aCIsIkVycm9yIiwiY29kZXBhZ2UiLCJjb2xsYXRpb24iLCJyZWFkTWF4Q2hhcnMiLCJyZWFkVUludDE2TEUiLCJyZWFkQ2hhcnMiLCJyZWFkTWF4TkNoYXJzIiwicmVhZE5DaGFycyIsInJlYWRNYXhCaW5hcnkiLCJyZWFkQmluYXJ5IiwidGV4dFBvaW50ZXJMZW5ndGgiLCJyZWFkQnVmZmVyIiwiX3RleHRQb2ludGVyIiwiX3RpbWVzdGFtcCIsInJlYWRTbWFsbERhdGVUaW1lIiwidXNlVVRDIiwicmVhZERhdGVUaW1lIiwicmVhZFRpbWUiLCJzY2FsZSIsInJlYWREYXRlIiwicmVhZERhdGVUaW1lMiIsInJlYWREYXRlVGltZU9mZnNldCIsInJlYWROdW1lcmljIiwicHJlY2lzaW9uIiwicmVhZFVuaXF1ZUlkZW50aWZpZXIiLCJzcHJpbnRmIiwicmVhZFZhcmlhbnQiLCJkYXRhIiwibG93ZXJDYXNlR3VpZHMiLCJidWZmZXJUb0xvd2VyQ2FzZUd1aWQiLCJidWZmZXJUb1VwcGVyQ2FzZUd1aWQiLCJfcHJlY2lzaW9uIiwic2lnbiIsInJlYWRWYWx1ZSIsInJlYWRVTnVtZXJpYzY0TEUiLCJyZWFkVU51bWVyaWM5NkxFIiwicmVhZFVOdW1lcmljMTI4TEUiLCJjYWxsIiwiTWF0aCIsInBvdyIsImJhc2VUeXBlIiwiVFlQRSIsInByb3BCeXRlcyIsIl9tYXhMZW5ndGgiLCJyZWFkQ29sbGF0aW9uIiwiX2NvbGxhdGlvbiIsImljb252IiwiZGVjb2RlIiwicmVhZE1heCIsImVxdWFscyIsInJlYWRNYXhVbmtub3duTGVuZ3RoIiwiY29uc29sZSIsIndhcm4iLCJleHBlY3RlZExlbmd0aCIsInJlYWRNYXhLbm93bkxlbmd0aCIsInRvdGFsTGVuZ3RoIiwiYWxsb2MiLCJvZmZzZXQiLCJuZXh0IiwiZG9uZSIsImNodW5rTGVuZ3RoIiwiY2h1bmsiLCJjb3B5IiwiY2h1bmtzIiwibGVuZ3RoIiwicHVzaCIsImNvbmNhdCIsImRheXMiLCJtaW51dGVzIiwiRGF0ZSIsIlVUQyIsInRocmVlSHVuZHJlZHRoc09mU2Vjb25kIiwibWlsbGlzZWNvbmRzIiwicm91bmQiLCJyZWFkVUludDI0TEUiLCJyZWFkVUludDQwTEUiLCJpIiwiZGF0ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsInRpbWUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwibmFub3NlY29uZHNEZWx0YSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsIm1vZHVsZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy92YWx1ZS1wYXJzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhcnNlciwgeyB0eXBlIFBhcnNlck9wdGlvbnMgfSBmcm9tICcuL3Rva2VuL3N0cmVhbS1wYXJzZXInO1xuaW1wb3J0IHsgdHlwZSBNZXRhZGF0YSwgcmVhZENvbGxhdGlvbiB9IGZyb20gJy4vbWV0YWRhdGEtcGFyc2VyJztcbmltcG9ydCB7IFRZUEUgfSBmcm9tICcuL2RhdGEtdHlwZSc7XG5cbmltcG9ydCBpY29udiBmcm9tICdpY29udi1saXRlJztcbmltcG9ydCB7IHNwcmludGYgfSBmcm9tICdzcHJpbnRmLWpzJztcbmltcG9ydCB7IGJ1ZmZlclRvTG93ZXJDYXNlR3VpZCwgYnVmZmVyVG9VcHBlckNhc2VHdWlkIH0gZnJvbSAnLi9ndWlkLXBhcnNlcic7XG5cbmNvbnN0IE5VTEwgPSAoMSA8PCAxNikgLSAxO1xuY29uc3QgTUFYID0gKDEgPDwgMTYpIC0gMTtcbmNvbnN0IFRIUkVFX0FORF9BX1RISVJEID0gMyArICgxIC8gMyk7XG5jb25zdCBNT05FWV9ESVZJU09SID0gMTAwMDA7XG5jb25zdCBQTFBfTlVMTCA9IEJ1ZmZlci5mcm9tKFsweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGXSk7XG5jb25zdCBVTktOT1dOX1BMUF9MRU4gPSBCdWZmZXIuZnJvbShbMHhGRSwgMHhGRiwgMHhGRiwgMHhGRiwgMHhGRiwgMHhGRiwgMHhGRiwgMHhGRl0pO1xuY29uc3QgREVGQVVMVF9FTkNPRElORyA9ICd1dGY4JztcblxuZnVuY3Rpb24gcmVhZFRpbnlJbnQocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRVSW50OChjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRTbWFsbEludChwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEludDE2TEUoY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiByZWFkSW50KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkSW50MzJMRShjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRCaWdJbnQocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRCaWdJbnQ2NExFKCh2YWx1ZSkgPT4ge1xuICAgIGNhbGxiYWNrKHZhbHVlLnRvU3RyaW5nKCkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZFJlYWwocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRGbG9hdExFKGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZsb2F0KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkRG91YmxlTEUoY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiByZWFkU21hbGxNb25leShwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEludDMyTEUoKHZhbHVlKSA9PiB7XG4gICAgY2FsbGJhY2sodmFsdWUgLyBNT05FWV9ESVZJU09SKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNb25leShwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEludDMyTEUoKGhpZ2gpID0+IHtcbiAgICBwYXJzZXIucmVhZFVJbnQzMkxFKChsb3cpID0+IHtcbiAgICAgIGNhbGxiYWNrKChsb3cgKyAoMHgxMDAwMDAwMDAgKiBoaWdoKSkgLyBNT05FWV9ESVZJU09SKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRCaXQocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRVSW50OCgodmFsdWUpID0+IHtcbiAgICBjYWxsYmFjayghIXZhbHVlKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbHVlUGFyc2UocGFyc2VyOiBQYXJzZXIsIG1ldGFkYXRhOiBNZXRhZGF0YSwgb3B0aW9uczogUGFyc2VyT3B0aW9ucywgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCk6IHZvaWQge1xuICBjb25zdCB0eXBlID0gbWV0YWRhdGEudHlwZTtcblxuICBzd2l0Y2ggKHR5cGUubmFtZSkge1xuICAgIGNhc2UgJ051bGwnOlxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuXG4gICAgY2FzZSAnVGlueUludCc6XG4gICAgICByZXR1cm4gcmVhZFRpbnlJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdTbWFsbEludCc6XG4gICAgICByZXR1cm4gcmVhZFNtYWxsSW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnSW50JzpcbiAgICAgIHJldHVybiByZWFkSW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnQmlnSW50JzpcbiAgICAgIHJldHVybiByZWFkQmlnSW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnSW50Tic6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGRhdGFMZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gcmVhZFRpbnlJbnQocGFyc2VyLCBjYWxsYmFjayk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRTbWFsbEludChwYXJzZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gcmVhZEludChwYXJzZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gcmVhZEJpZ0ludChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGRhdGFMZW5ndGggJyArIGRhdGFMZW5ndGggKyAnIGZvciBJbnROJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnUmVhbCc6XG4gICAgICByZXR1cm4gcmVhZFJlYWwocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdGbG9hdCc6XG4gICAgICByZXR1cm4gcmVhZEZsb2F0KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnRmxvYXROJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiByZWFkUmVhbChwYXJzZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZGF0YUxlbmd0aCAnICsgZGF0YUxlbmd0aCArICcgZm9yIEZsb2F0TicpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ1NtYWxsTW9uZXknOlxuICAgICAgcmV0dXJuIHJlYWRTbWFsbE1vbmV5KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnTW9uZXknOlxuICAgICAgcmV0dXJuIHJlYWRNb25leShwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ01vbmV5Tic6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGRhdGFMZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG5cbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gcmVhZFNtYWxsTW9uZXkocGFyc2VyLCBjYWxsYmFjayk7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRNb25leShwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGRhdGFMZW5ndGggJyArIGRhdGFMZW5ndGggKyAnIGZvciBNb25leU4nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdCaXQnOlxuICAgICAgcmV0dXJuIHJlYWRCaXQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdCaXROJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiByZWFkQml0KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZGF0YUxlbmd0aCAnICsgZGF0YUxlbmd0aCArICcgZm9yIEJpdE4nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdWYXJDaGFyJzpcbiAgICBjYXNlICdDaGFyJzpcbiAgICAgIGNvbnN0IGNvZGVwYWdlID0gbWV0YWRhdGEuY29sbGF0aW9uIS5jb2RlcGFnZSE7XG4gICAgICBpZiAobWV0YWRhdGEuZGF0YUxlbmd0aCA9PT0gTUFYKSB7XG4gICAgICAgIHJldHVybiByZWFkTWF4Q2hhcnMocGFyc2VyLCBjb2RlcGFnZSwgY2FsbGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDE2TEUoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gTlVMTCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlYWRDaGFycyhwYXJzZXIsIGRhdGFMZW5ndGghLCBjb2RlcGFnZSwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ05WYXJDaGFyJzpcbiAgICBjYXNlICdOQ2hhcic6XG4gICAgICBpZiAobWV0YWRhdGEuZGF0YUxlbmd0aCA9PT0gTUFYKSB7XG4gICAgICAgIHJldHVybiByZWFkTWF4TkNoYXJzKHBhcnNlciwgY2FsbGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDE2TEUoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gTlVMTCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlYWROQ2hhcnMocGFyc2VyLCBkYXRhTGVuZ3RoISwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ1ZhckJpbmFyeSc6XG4gICAgY2FzZSAnQmluYXJ5JzpcbiAgICAgIGlmIChtZXRhZGF0YS5kYXRhTGVuZ3RoID09PSBNQVgpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRNYXhCaW5hcnkocGFyc2VyLCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50MTZMRSgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSBOVUxMKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVhZEJpbmFyeShwYXJzZXIsIGRhdGFMZW5ndGghLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgY2FzZSAnVGV4dCc6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgodGV4dFBvaW50ZXJMZW5ndGgpID0+IHtcbiAgICAgICAgaWYgKHRleHRQb2ludGVyTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyc2VyLnJlYWRCdWZmZXIodGV4dFBvaW50ZXJMZW5ndGgsIChfdGV4dFBvaW50ZXIpID0+IHtcbiAgICAgICAgICBwYXJzZXIucmVhZEJ1ZmZlcig4LCAoX3RpbWVzdGFtcCkgPT4ge1xuICAgICAgICAgICAgcGFyc2VyLnJlYWRVSW50MzJMRSgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICAgICAgICByZWFkQ2hhcnMocGFyc2VyLCBkYXRhTGVuZ3RoISwgbWV0YWRhdGEuY29sbGF0aW9uIS5jb2RlcGFnZSEsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnTlRleHQnOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHRleHRQb2ludGVyTGVuZ3RoKSA9PiB7XG4gICAgICAgIGlmICh0ZXh0UG9pbnRlckxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlci5yZWFkQnVmZmVyKHRleHRQb2ludGVyTGVuZ3RoLCAoX3RleHRQb2ludGVyKSA9PiB7XG4gICAgICAgICAgcGFyc2VyLnJlYWRCdWZmZXIoOCwgKF90aW1lc3RhbXApID0+IHtcbiAgICAgICAgICAgIHBhcnNlci5yZWFkVUludDMyTEUoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgICAgICAgcmVhZE5DaGFycyhwYXJzZXIsIGRhdGFMZW5ndGghLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ0ltYWdlJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KCh0ZXh0UG9pbnRlckxlbmd0aCkgPT4ge1xuICAgICAgICBpZiAodGV4dFBvaW50ZXJMZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJzZXIucmVhZEJ1ZmZlcih0ZXh0UG9pbnRlckxlbmd0aCwgKF90ZXh0UG9pbnRlcikgPT4ge1xuICAgICAgICAgIHBhcnNlci5yZWFkQnVmZmVyKDgsIChfdGltZXN0YW1wKSA9PiB7XG4gICAgICAgICAgICBwYXJzZXIucmVhZFVJbnQzMkxFKChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICAgIHJlYWRCaW5hcnkocGFyc2VyLCBkYXRhTGVuZ3RoISwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBjYXNlICdYbWwnOlxuICAgICAgcmV0dXJuIHJlYWRNYXhOQ2hhcnMocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdTbWFsbERhdGVUaW1lJzpcbiAgICAgIHJldHVybiByZWFkU21hbGxEYXRlVGltZShwYXJzZXIsIG9wdGlvbnMudXNlVVRDLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdEYXRlVGltZSc6XG4gICAgICByZXR1cm4gcmVhZERhdGVUaW1lKHBhcnNlciwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ0RhdGVUaW1lTic6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGRhdGFMZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG5cbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gcmVhZFNtYWxsRGF0ZVRpbWUocGFyc2VyLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiByZWFkRGF0ZVRpbWUocGFyc2VyLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZGF0YUxlbmd0aCAnICsgZGF0YUxlbmd0aCArICcgZm9yIERhdGVUaW1lTicpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ1RpbWUnOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlYWRUaW1lKHBhcnNlciwgZGF0YUxlbmd0aCEsIG1ldGFkYXRhLnNjYWxlISwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdEYXRlJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZWFkRGF0ZShwYXJzZXIsIG9wdGlvbnMudXNlVVRDLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnRGF0ZVRpbWUyJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZWFkRGF0ZVRpbWUyKHBhcnNlciwgZGF0YUxlbmd0aCEsIG1ldGFkYXRhLnNjYWxlISwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdEYXRlVGltZU9mZnNldCc6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVhZERhdGVUaW1lT2Zmc2V0KHBhcnNlciwgZGF0YUxlbmd0aCEsIG1ldGFkYXRhLnNjYWxlISwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ051bWVyaWNOJzpcbiAgICBjYXNlICdEZWNpbWFsTic6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVhZE51bWVyaWMocGFyc2VyLCBkYXRhTGVuZ3RoISwgbWV0YWRhdGEucHJlY2lzaW9uISwgbWV0YWRhdGEuc2NhbGUhLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnVW5pcXVlSWRlbnRpZmllcic6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGRhdGFMZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG5cbiAgICAgICAgICBjYXNlIDB4MTA6XG4gICAgICAgICAgICByZXR1cm4gcmVhZFVuaXF1ZUlkZW50aWZpZXIocGFyc2VyLCBvcHRpb25zLCBjYWxsYmFjayk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHNwcmludGYoJ1Vuc3VwcG9ydGVkIGd1aWQgc2l6ZSAlZCcsIGRhdGFMZW5ndGghIC0gMSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ1VEVCc6XG4gICAgICByZXR1cm4gcmVhZE1heEJpbmFyeShwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ1ZhcmlhbnQnOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDMyTEUoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZWFkVmFyaWFudChwYXJzZXIsIG9wdGlvbnMsIGRhdGFMZW5ndGghLCBjYWxsYmFjayk7XG4gICAgICB9KTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3Ioc3ByaW50ZignVW5yZWNvZ25pc2VkIHR5cGUgJXMnLCB0eXBlLm5hbWUpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkVW5pcXVlSWRlbnRpZmllcihwYXJzZXI6IFBhcnNlciwgb3B0aW9uczogUGFyc2VyT3B0aW9ucywgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEJ1ZmZlcigweDEwLCAoZGF0YSkgPT4ge1xuICAgIGNhbGxiYWNrKG9wdGlvbnMubG93ZXJDYXNlR3VpZHMgPyBidWZmZXJUb0xvd2VyQ2FzZUd1aWQoZGF0YSkgOiBidWZmZXJUb1VwcGVyQ2FzZUd1aWQoZGF0YSkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZE51bWVyaWMocGFyc2VyOiBQYXJzZXIsIGRhdGFMZW5ndGg6IG51bWJlciwgX3ByZWNpc2lvbjogbnVtYmVyLCBzY2FsZTogbnVtYmVyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkVUludDgoKHNpZ24pID0+IHtcbiAgICBzaWduID0gc2lnbiA9PT0gMSA/IDEgOiAtMTtcblxuICAgIGxldCByZWFkVmFsdWU7XG4gICAgaWYgKGRhdGFMZW5ndGggPT09IDUpIHtcbiAgICAgIHJlYWRWYWx1ZSA9IHBhcnNlci5yZWFkVUludDMyTEU7XG4gICAgfSBlbHNlIGlmIChkYXRhTGVuZ3RoID09PSA5KSB7XG4gICAgICByZWFkVmFsdWUgPSBwYXJzZXIucmVhZFVOdW1lcmljNjRMRTtcbiAgICB9IGVsc2UgaWYgKGRhdGFMZW5ndGggPT09IDEzKSB7XG4gICAgICByZWFkVmFsdWUgPSBwYXJzZXIucmVhZFVOdW1lcmljOTZMRTtcbiAgICB9IGVsc2UgaWYgKGRhdGFMZW5ndGggPT09IDE3KSB7XG4gICAgICByZWFkVmFsdWUgPSBwYXJzZXIucmVhZFVOdW1lcmljMTI4TEU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKCdVbnN1cHBvcnRlZCBudW1lcmljIGRhdGFMZW5ndGggJWQnLCBkYXRhTGVuZ3RoKSk7XG4gICAgfVxuXG4gICAgcmVhZFZhbHVlLmNhbGwocGFyc2VyLCAodmFsdWUpID0+IHtcbiAgICAgIGNhbGxiYWNrKCh2YWx1ZSAqIHNpZ24pIC8gTWF0aC5wb3coMTAsIHNjYWxlKSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkVmFyaWFudChwYXJzZXI6IFBhcnNlciwgb3B0aW9uczogUGFyc2VyT3B0aW9ucywgZGF0YUxlbmd0aDogbnVtYmVyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChiYXNlVHlwZSkgPT4ge1xuICAgIGNvbnN0IHR5cGUgPSBUWVBFW2Jhc2VUeXBlXTtcblxuICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChwcm9wQnl0ZXMpID0+IHtcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhTGVuZ3RoIC0gcHJvcEJ5dGVzIC0gMjtcblxuICAgICAgc3dpdGNoICh0eXBlLm5hbWUpIHtcbiAgICAgICAgY2FzZSAnVW5pcXVlSWRlbnRpZmllcic6XG4gICAgICAgICAgcmV0dXJuIHJlYWRVbmlxdWVJZGVudGlmaWVyKHBhcnNlciwgb3B0aW9ucywgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ0JpdCc6XG4gICAgICAgICAgcmV0dXJuIHJlYWRCaXQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnVGlueUludCc6XG4gICAgICAgICAgcmV0dXJuIHJlYWRUaW55SW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ1NtYWxsSW50JzpcbiAgICAgICAgICByZXR1cm4gcmVhZFNtYWxsSW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ0ludCc6XG4gICAgICAgICAgcmV0dXJuIHJlYWRJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnQmlnSW50JzpcbiAgICAgICAgICByZXR1cm4gcmVhZEJpZ0ludChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdTbWFsbERhdGVUaW1lJzpcbiAgICAgICAgICByZXR1cm4gcmVhZFNtYWxsRGF0ZVRpbWUocGFyc2VyLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ0RhdGVUaW1lJzpcbiAgICAgICAgICByZXR1cm4gcmVhZERhdGVUaW1lKHBhcnNlciwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdSZWFsJzpcbiAgICAgICAgICByZXR1cm4gcmVhZFJlYWwocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnRmxvYXQnOlxuICAgICAgICAgIHJldHVybiByZWFkRmxvYXQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnU21hbGxNb25leSc6XG4gICAgICAgICAgcmV0dXJuIHJlYWRTbWFsbE1vbmV5KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ01vbmV5JzpcbiAgICAgICAgICByZXR1cm4gcmVhZE1vbmV5KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ0RhdGUnOlxuICAgICAgICAgIHJldHVybiByZWFkRGF0ZShwYXJzZXIsIG9wdGlvbnMudXNlVVRDLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnVGltZSc6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHNjYWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZFRpbWUocGFyc2VyLCBkYXRhTGVuZ3RoLCBzY2FsZSwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlICdEYXRlVGltZTInOlxuICAgICAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChzY2FsZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWREYXRlVGltZTIocGFyc2VyLCBkYXRhTGVuZ3RoLCBzY2FsZSwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlICdEYXRlVGltZU9mZnNldCc6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHNjYWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZERhdGVUaW1lT2Zmc2V0KHBhcnNlciwgZGF0YUxlbmd0aCwgc2NhbGUsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlICdWYXJCaW5hcnknOlxuICAgICAgICBjYXNlICdCaW5hcnknOlxuICAgICAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQxNkxFKChfbWF4TGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICByZWFkQmluYXJ5KHBhcnNlciwgZGF0YUxlbmd0aCwgY2FsbGJhY2spO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgJ051bWVyaWNOJzpcbiAgICAgICAgY2FzZSAnRGVjaW1hbE4nOlxuICAgICAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChwcmVjaXNpb24pID0+IHtcbiAgICAgICAgICAgIHBhcnNlci5yZWFkVUludDgoKHNjYWxlKSA9PiB7XG4gICAgICAgICAgICAgIHJlYWROdW1lcmljKHBhcnNlciwgZGF0YUxlbmd0aCwgcHJlY2lzaW9uLCBzY2FsZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSAnVmFyQ2hhcic6XG4gICAgICAgIGNhc2UgJ0NoYXInOlxuICAgICAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQxNkxFKChfbWF4TGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICByZWFkQ29sbGF0aW9uKHBhcnNlciwgKGNvbGxhdGlvbikgPT4ge1xuICAgICAgICAgICAgICByZWFkQ2hhcnMocGFyc2VyLCBkYXRhTGVuZ3RoLCBjb2xsYXRpb24uY29kZXBhZ2UhLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlICdOVmFyQ2hhcic6XG4gICAgICAgIGNhc2UgJ05DaGFyJzpcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50MTZMRSgoX21heExlbmd0aCkgPT4ge1xuICAgICAgICAgICAgcmVhZENvbGxhdGlvbihwYXJzZXIsIChfY29sbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIHJlYWROQ2hhcnMocGFyc2VyLCBkYXRhTGVuZ3RoLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0eXBlIScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZEJpbmFyeShwYXJzZXI6IFBhcnNlciwgZGF0YUxlbmd0aDogbnVtYmVyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHJldHVybiBwYXJzZXIucmVhZEJ1ZmZlcihkYXRhTGVuZ3RoLCBjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRDaGFycyhwYXJzZXI6IFBhcnNlciwgZGF0YUxlbmd0aDogbnVtYmVyLCBjb2RlcGFnZTogc3RyaW5nLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIGlmIChjb2RlcGFnZSA9PSBudWxsKSB7XG4gICAgY29kZXBhZ2UgPSBERUZBVUxUX0VOQ09ESU5HO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlci5yZWFkQnVmZmVyKGRhdGFMZW5ndGgsIChkYXRhKSA9PiB7XG4gICAgY2FsbGJhY2soaWNvbnYuZGVjb2RlKGRhdGEsIGNvZGVwYWdlKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkTkNoYXJzKHBhcnNlcjogUGFyc2VyLCBkYXRhTGVuZ3RoOiBudW1iZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRCdWZmZXIoZGF0YUxlbmd0aCwgKGRhdGEpID0+IHtcbiAgICBjYWxsYmFjayhkYXRhLnRvU3RyaW5nKCd1Y3MyJykpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZE1heEJpbmFyeShwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICByZXR1cm4gcmVhZE1heChwYXJzZXIsIGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZE1heENoYXJzKHBhcnNlcjogUGFyc2VyLCBjb2RlcGFnZTogc3RyaW5nLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIGlmIChjb2RlcGFnZSA9PSBudWxsKSB7XG4gICAgY29kZXBhZ2UgPSBERUZBVUxUX0VOQ09ESU5HO1xuICB9XG5cbiAgcmVhZE1heChwYXJzZXIsIChkYXRhKSA9PiB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGNhbGxiYWNrKGljb252LmRlY29kZShkYXRhLCBjb2RlcGFnZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkTWF4TkNoYXJzKHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XG4gIHJlYWRNYXgocGFyc2VyLCAoZGF0YSkgPT4ge1xuICAgIGlmIChkYXRhKSB7XG4gICAgICBjYWxsYmFjayhkYXRhLnRvU3RyaW5nKCd1Y3MyJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkTWF4KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiBudWxsIHwgQnVmZmVyKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkQnVmZmVyKDgsICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUuZXF1YWxzKFBMUF9OVUxMKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgIH0gZWxzZSBpZiAodHlwZS5lcXVhbHMoVU5LTk9XTl9QTFBfTEVOKSkge1xuICAgICAgcmV0dXJuIHJlYWRNYXhVbmtub3duTGVuZ3RoKHBhcnNlciwgY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsb3cgPSB0eXBlLnJlYWRVSW50MzJMRSgwKTtcbiAgICAgIGNvbnN0IGhpZ2ggPSB0eXBlLnJlYWRVSW50MzJMRSg0KTtcblxuICAgICAgaWYgKGhpZ2ggPj0gKDIgPDwgKDUzIC0gMzIpKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1JlYWQgVUludDY0TEUgPiA1MyBiaXRzIDogaGlnaD0nICsgaGlnaCArICcsIGxvdz0nICsgbG93KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXhwZWN0ZWRMZW5ndGggPSBsb3cgKyAoMHgxMDAwMDAwMDAgKiBoaWdoKTtcbiAgICAgIHJldHVybiByZWFkTWF4S25vd25MZW5ndGgocGFyc2VyLCBleHBlY3RlZExlbmd0aCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNYXhLbm93bkxlbmd0aChwYXJzZXI6IFBhcnNlciwgdG90YWxMZW5ndGg6IG51bWJlciwgY2FsbGJhY2s6ICh2YWx1ZTogbnVsbCB8IEJ1ZmZlcikgPT4gdm9pZCkge1xuICBjb25zdCBkYXRhID0gQnVmZmVyLmFsbG9jKHRvdGFsTGVuZ3RoLCAwKTtcblxuICBsZXQgb2Zmc2V0ID0gMDtcbiAgZnVuY3Rpb24gbmV4dChkb25lOiBhbnkpIHtcbiAgICBwYXJzZXIucmVhZFVJbnQzMkxFKChjaHVua0xlbmd0aCkgPT4ge1xuICAgICAgaWYgKCFjaHVua0xlbmd0aCkge1xuICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgfVxuXG4gICAgICBwYXJzZXIucmVhZEJ1ZmZlcihjaHVua0xlbmd0aCwgKGNodW5rKSA9PiB7XG4gICAgICAgIGNodW5rLmNvcHkoZGF0YSwgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ICs9IGNodW5rTGVuZ3RoO1xuXG4gICAgICAgIG5leHQoZG9uZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIG5leHQoKCkgPT4ge1xuICAgIGlmIChvZmZzZXQgIT09IHRvdGFsTGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcnRpYWxseSBMZW5ndGgtcHJlZml4ZWQgQnl0ZXMgdW5tYXRjaGVkIGxlbmd0aHMgOiBleHBlY3RlZCAnICsgdG90YWxMZW5ndGggKyAnLCBidXQgZ290ICcgKyBvZmZzZXQgKyAnIGJ5dGVzJyk7XG4gICAgfVxuXG4gICAgY2FsbGJhY2soZGF0YSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkTWF4VW5rbm93bkxlbmd0aChwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogbnVsbCB8IEJ1ZmZlcikgPT4gdm9pZCkge1xuICBjb25zdCBjaHVua3M6IEJ1ZmZlcltdID0gW107XG5cbiAgbGV0IGxlbmd0aCA9IDA7XG4gIGZ1bmN0aW9uIG5leHQoZG9uZTogYW55KSB7XG4gICAgcGFyc2VyLnJlYWRVSW50MzJMRSgoY2h1bmtMZW5ndGgpID0+IHtcbiAgICAgIGlmICghY2h1bmtMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgIH1cblxuICAgICAgcGFyc2VyLnJlYWRCdWZmZXIoY2h1bmtMZW5ndGgsIChjaHVuaykgPT4ge1xuICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgIGxlbmd0aCArPSBjaHVua0xlbmd0aDtcblxuICAgICAgICBuZXh0KGRvbmUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBuZXh0KCgpID0+IHtcbiAgICBjYWxsYmFjayhCdWZmZXIuY29uY2F0KGNodW5rcywgbGVuZ3RoKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkU21hbGxEYXRlVGltZShwYXJzZXI6IFBhcnNlciwgdXNlVVRDOiBib29sZWFuLCBjYWxsYmFjazogKHZhbHVlOiBEYXRlKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkVUludDE2TEUoKGRheXMpID0+IHtcbiAgICBwYXJzZXIucmVhZFVJbnQxNkxFKChtaW51dGVzKSA9PiB7XG4gICAgICBsZXQgdmFsdWU7XG4gICAgICBpZiAodXNlVVRDKSB7XG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoRGF0ZS5VVEMoMTkwMCwgMCwgMSArIGRheXMsIDAsIG1pbnV0ZXMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoMTkwMCwgMCwgMSArIGRheXMsIDAsIG1pbnV0ZXMpO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2sodmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZERhdGVUaW1lKHBhcnNlcjogUGFyc2VyLCB1c2VVVEM6IGJvb2xlYW4sIGNhbGxiYWNrOiAodmFsdWU6IERhdGUpID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRJbnQzMkxFKChkYXlzKSA9PiB7XG4gICAgcGFyc2VyLnJlYWRVSW50MzJMRSgodGhyZWVIdW5kcmVkdGhzT2ZTZWNvbmQpID0+IHtcbiAgICAgIGNvbnN0IG1pbGxpc2Vjb25kcyA9IE1hdGgucm91bmQodGhyZWVIdW5kcmVkdGhzT2ZTZWNvbmQgKiBUSFJFRV9BTkRfQV9USElSRCk7XG5cbiAgICAgIGxldCB2YWx1ZTtcbiAgICAgIGlmICh1c2VVVEMpIHtcbiAgICAgICAgdmFsdWUgPSBuZXcgRGF0ZShEYXRlLlVUQygxOTAwLCAwLCAxICsgZGF5cywgMCwgMCwgMCwgbWlsbGlzZWNvbmRzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IG5ldyBEYXRlKDE5MDAsIDAsIDEgKyBkYXlzLCAwLCAwLCAwLCBtaWxsaXNlY29uZHMpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayh2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5pbnRlcmZhY2UgRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhIGV4dGVuZHMgRGF0ZSB7XG4gIG5hbm9zZWNvbmRzRGVsdGE6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gcmVhZFRpbWUocGFyc2VyOiBQYXJzZXIsIGRhdGFMZW5ndGg6IG51bWJlciwgc2NhbGU6IG51bWJlciwgdXNlVVRDOiBib29sZWFuLCBjYWxsYmFjazogKHZhbHVlOiBEYXRlV2l0aE5hbm9zZWNvbmRzRGVsdGEpID0+IHZvaWQpIHtcbiAgbGV0IHJlYWRWYWx1ZTogYW55O1xuICBzd2l0Y2ggKGRhdGFMZW5ndGgpIHtcbiAgICBjYXNlIDM6XG4gICAgICByZWFkVmFsdWUgPSBwYXJzZXIucmVhZFVJbnQyNExFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0OlxuICAgICAgcmVhZFZhbHVlID0gcGFyc2VyLnJlYWRVSW50MzJMRTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNTpcbiAgICAgIHJlYWRWYWx1ZSA9IHBhcnNlci5yZWFkVUludDQwTEU7XG4gIH1cblxuICByZWFkVmFsdWUhLmNhbGwocGFyc2VyLCAodmFsdWU6IG51bWJlcikgPT4ge1xuICAgIGlmIChzY2FsZSA8IDcpIHtcbiAgICAgIGZvciAobGV0IGkgPSBzY2FsZTsgaSA8IDc7IGkrKykge1xuICAgICAgICB2YWx1ZSAqPSAxMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZGF0ZTtcbiAgICBpZiAodXNlVVRDKSB7XG4gICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoMTk3MCwgMCwgMSwgMCwgMCwgMCwgdmFsdWUgLyAxMDAwMCkpIGFzIERhdGVXaXRoTmFub3NlY29uZHNEZWx0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKDE5NzAsIDAsIDEsIDAsIDAsIDAsIHZhbHVlIC8gMTAwMDApIGFzIERhdGVXaXRoTmFub3NlY29uZHNEZWx0YTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGUsICduYW5vc2Vjb25kc0RlbHRhJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB2YWx1ZTogKHZhbHVlICUgMTAwMDApIC8gTWF0aC5wb3coMTAsIDcpXG4gICAgfSk7XG4gICAgY2FsbGJhY2soZGF0ZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkRGF0ZShwYXJzZXI6IFBhcnNlciwgdXNlVVRDOiBib29sZWFuLCBjYWxsYmFjazogKHZhbHVlOiBEYXRlKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkVUludDI0TEUoKGRheXMpID0+IHtcbiAgICBpZiAodXNlVVRDKSB7XG4gICAgICBjYWxsYmFjayhuZXcgRGF0ZShEYXRlLlVUQygyMDAwLCAwLCBkYXlzIC0gNzMwMTE4KSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhuZXcgRGF0ZSgyMDAwLCAwLCBkYXlzIC0gNzMwMTE4KSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZERhdGVUaW1lMihwYXJzZXI6IFBhcnNlciwgZGF0YUxlbmd0aDogbnVtYmVyLCBzY2FsZTogbnVtYmVyLCB1c2VVVEM6IGJvb2xlYW4sIGNhbGxiYWNrOiAodmFsdWU6IERhdGVXaXRoTmFub3NlY29uZHNEZWx0YSkgPT4gdm9pZCkge1xuICByZWFkVGltZShwYXJzZXIsIGRhdGFMZW5ndGggLSAzLCBzY2FsZSwgdXNlVVRDLCAodGltZSkgPT4geyAvLyBUT0RPOiAnaW5wdXQnIGlzICd0aW1lJywgYnV0IFR5cGVTY3JpcHQgY2Fubm90IGZpbmQgXCJ0aW1lLm5hbm9zZWNvbmRzRGVsdGFcIjtcbiAgICBwYXJzZXIucmVhZFVJbnQyNExFKChkYXlzKSA9PiB7XG4gICAgICBsZXQgZGF0ZTtcbiAgICAgIGlmICh1c2VVVEMpIHtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKDIwMDAsIDAsIGRheXMgLSA3MzAxMTgsIDAsIDAsIDAsICt0aW1lKSkgYXMgRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDIwMDAsIDAsIGRheXMgLSA3MzAxMTgsIHRpbWUuZ2V0SG91cnMoKSwgdGltZS5nZXRNaW51dGVzKCksIHRpbWUuZ2V0U2Vjb25kcygpLCB0aW1lLmdldE1pbGxpc2Vjb25kcygpKSBhcyBEYXRlV2l0aE5hbm9zZWNvbmRzRGVsdGE7XG4gICAgICB9XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0ZSwgJ25hbm9zZWNvbmRzRGVsdGEnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogdGltZS5uYW5vc2Vjb25kc0RlbHRhXG4gICAgICB9KTtcbiAgICAgIGNhbGxiYWNrKGRhdGUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZERhdGVUaW1lT2Zmc2V0KHBhcnNlcjogUGFyc2VyLCBkYXRhTGVuZ3RoOiBudW1iZXIsIHNjYWxlOiBudW1iZXIsIGNhbGxiYWNrOiAodmFsdWU6IERhdGVXaXRoTmFub3NlY29uZHNEZWx0YSkgPT4gdm9pZCkge1xuICByZWFkVGltZShwYXJzZXIsIGRhdGFMZW5ndGggLSA1LCBzY2FsZSwgdHJ1ZSwgKHRpbWUpID0+IHtcbiAgICBwYXJzZXIucmVhZFVJbnQyNExFKChkYXlzKSA9PiB7XG4gICAgICAvLyBvZmZzZXRcbiAgICAgIHBhcnNlci5yZWFkSW50MTZMRSgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQygyMDAwLCAwLCBkYXlzIC0gNzMwMTE4LCAwLCAwLCAwLCArdGltZSkpIGFzIERhdGVXaXRoTmFub3NlY29uZHNEZWx0YTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGUsICduYW5vc2Vjb25kc0RlbHRhJywge1xuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIHZhbHVlOiB0aW1lLm5hbm9zZWNvbmRzRGVsdGFcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbGxiYWNrKGRhdGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2YWx1ZVBhcnNlO1xu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