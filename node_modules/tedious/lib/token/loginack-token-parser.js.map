{"version":3,"file":"loginack-token-parser.js","names":["_token","require","_tdsVersions","interfaceTypes","loginAckParser","parser","_options","callback","readUInt16LE","readUInt8","interfaceNumber","interfaceType","readUInt32BE","tdsVersionNumber","tdsVersion","versions","readBVarChar","progName","major","minor","buildNumHi","buildNumLow","LoginAckToken","interface","progVersion","_default","exports","default","module"],"sources":["../../src/token/loginack-token-parser.ts"],"sourcesContent":["import Parser, { type ParserOptions } from './stream-parser';\n\nimport { LoginAckToken } from './token';\n\nimport { versionsByValue as versions } from '../tds-versions';\n\nconst interfaceTypes: { [key: number]: string } = {\n  0: 'SQL_DFLT',\n  1: 'SQL_TSQL'\n};\n\nfunction loginAckParser(parser: Parser, _options: ParserOptions, callback: (token: LoginAckToken) => void) {\n  // length\n  parser.readUInt16LE(() => {\n    parser.readUInt8((interfaceNumber) => {\n      const interfaceType = interfaceTypes[interfaceNumber];\n      parser.readUInt32BE((tdsVersionNumber) => {\n        const tdsVersion = versions[tdsVersionNumber];\n        parser.readBVarChar((progName) => {\n          parser.readUInt8((major) => {\n            parser.readUInt8((minor) => {\n              parser.readUInt8((buildNumHi) => {\n                parser.readUInt8((buildNumLow) => {\n                  callback(new LoginAckToken({\n                    interface: interfaceType,\n                    tdsVersion: tdsVersion,\n                    progName: progName,\n                    progVersion: {\n                      major: major,\n                      minor: minor,\n                      buildNumHi: buildNumHi,\n                      buildNumLow: buildNumLow\n                    }\n                  }));\n                });\n              });\n            });\n          });\n        });\n      });\n    });\n  });\n}\n\nexport default loginAckParser;\nmodule.exports = loginAckParser;\n"],"mappings":";;;;;;AAEA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AAEA,MAAME,cAAyC,GAAG;EAChD,CAAC,EAAE,UAAU;EACb,CAAC,EAAE;AACL,CAAC;AAED,SAASC,cAAcA,CAACC,MAAc,EAAEC,QAAuB,EAAEC,QAAwC,EAAE;EACzG;EACAF,MAAM,CAACG,YAAY,CAAC,MAAM;IACxBH,MAAM,CAACI,SAAS,CAAEC,eAAe,IAAK;MACpC,MAAMC,aAAa,GAAGR,cAAc,CAACO,eAAe,CAAC;MACrDL,MAAM,CAACO,YAAY,CAAEC,gBAAgB,IAAK;QACxC,MAAMC,UAAU,GAAGC,4BAAQ,CAACF,gBAAgB,CAAC;QAC7CR,MAAM,CAACW,YAAY,CAAEC,QAAQ,IAAK;UAChCZ,MAAM,CAACI,SAAS,CAAES,KAAK,IAAK;YAC1Bb,MAAM,CAACI,SAAS,CAAEU,KAAK,IAAK;cAC1Bd,MAAM,CAACI,SAAS,CAAEW,UAAU,IAAK;gBAC/Bf,MAAM,CAACI,SAAS,CAAEY,WAAW,IAAK;kBAChCd,QAAQ,CAAC,IAAIe,oBAAa,CAAC;oBACzBC,SAAS,EAAEZ,aAAa;oBACxBG,UAAU,EAAEA,UAAU;oBACtBG,QAAQ,EAAEA,QAAQ;oBAClBO,WAAW,EAAE;sBACXN,KAAK,EAAEA,KAAK;sBACZC,KAAK,EAAEA,KAAK;sBACZC,UAAU,EAAEA,UAAU;sBACtBC,WAAW,EAAEA;oBACf;kBACF,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC;cACJ,CAAC,CAAC;YACJ,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;AAAC,IAAAI,QAAA,GAEcrB,cAAc;AAAAsB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAC7BG,MAAM,CAACF,OAAO,GAAGtB,cAAc"}