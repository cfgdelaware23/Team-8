"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _token = require("./token");
var _metadataParser = _interopRequireDefault(require("../metadata-parser"));
var _valueParser = _interopRequireDefault(require("../value-parser"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
// s2.2.7.16

function returnParser(parser, options, callback) {
  parser.readUInt16LE(paramOrdinal => {
    parser.readBVarChar(paramName => {
      if (paramName.charAt(0) === '@') {
        paramName = paramName.slice(1);
      }

      // status
      parser.readUInt8(() => {
        (0, _metadataParser.default)(parser, options, metadata => {
          (0, _valueParser.default)(parser, metadata, options, value => {
            callback(new _token.ReturnValueToken({
              paramOrdinal: paramOrdinal,
              paramName: paramName,
              metadata: metadata,
              value: value
            }));
          });
        });
      });
    });
  });
}
var _default = returnParser;
exports.default = _default;
module.exports = returnParser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9rZW4iLCJyZXF1aXJlIiwiX21ldGFkYXRhUGFyc2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl92YWx1ZVBhcnNlciIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwicmV0dXJuUGFyc2VyIiwicGFyc2VyIiwib3B0aW9ucyIsImNhbGxiYWNrIiwicmVhZFVJbnQxNkxFIiwicGFyYW1PcmRpbmFsIiwicmVhZEJWYXJDaGFyIiwicGFyYW1OYW1lIiwiY2hhckF0Iiwic2xpY2UiLCJyZWFkVUludDgiLCJtZXRhZGF0YVBhcnNlIiwibWV0YWRhdGEiLCJ2YWx1ZVBhcnNlIiwidmFsdWUiLCJSZXR1cm5WYWx1ZVRva2VuIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwibW9kdWxlIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Rva2VuL3JldHVybnZhbHVlLXRva2VuLXBhcnNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzMi4yLjcuMTZcblxuaW1wb3J0IFBhcnNlciwgeyB0eXBlIFBhcnNlck9wdGlvbnMgfSBmcm9tICcuL3N0cmVhbS1wYXJzZXInO1xuXG5pbXBvcnQgeyBSZXR1cm5WYWx1ZVRva2VuIH0gZnJvbSAnLi90b2tlbic7XG5cbmltcG9ydCBtZXRhZGF0YVBhcnNlIGZyb20gJy4uL21ldGFkYXRhLXBhcnNlcic7XG5pbXBvcnQgdmFsdWVQYXJzZSBmcm9tICcuLi92YWx1ZS1wYXJzZXInO1xuXG5mdW5jdGlvbiByZXR1cm5QYXJzZXIocGFyc2VyOiBQYXJzZXIsIG9wdGlvbnM6IFBhcnNlck9wdGlvbnMsIGNhbGxiYWNrOiAodG9rZW46IFJldHVyblZhbHVlVG9rZW4pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRVSW50MTZMRSgocGFyYW1PcmRpbmFsKSA9PiB7XG4gICAgcGFyc2VyLnJlYWRCVmFyQ2hhcigocGFyYW1OYW1lKSA9PiB7XG4gICAgICBpZiAocGFyYW1OYW1lLmNoYXJBdCgwKSA9PT0gJ0AnKSB7XG4gICAgICAgIHBhcmFtTmFtZSA9IHBhcmFtTmFtZS5zbGljZSgxKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3RhdHVzXG4gICAgICBwYXJzZXIucmVhZFVJbnQ4KCgpID0+IHtcbiAgICAgICAgbWV0YWRhdGFQYXJzZShwYXJzZXIsIG9wdGlvbnMsIChtZXRhZGF0YSkgPT4ge1xuICAgICAgICAgIHZhbHVlUGFyc2UocGFyc2VyLCBtZXRhZGF0YSwgb3B0aW9ucywgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgUmV0dXJuVmFsdWVUb2tlbih7XG4gICAgICAgICAgICAgIHBhcmFtT3JkaW5hbDogcGFyYW1PcmRpbmFsLFxuICAgICAgICAgICAgICBwYXJhbU5hbWU6IHBhcmFtTmFtZSxcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJldHVyblBhcnNlcjtcbm1vZHVsZS5leHBvcnRzID0gcmV0dXJuUGFyc2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxlQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFBeUMsU0FBQUUsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFQekM7O0FBU0EsU0FBU0csWUFBWUEsQ0FBQ0MsTUFBYyxFQUFFQyxPQUFzQixFQUFFQyxRQUEyQyxFQUFFO0VBQ3pHRixNQUFNLENBQUNHLFlBQVksQ0FBRUMsWUFBWSxJQUFLO0lBQ3BDSixNQUFNLENBQUNLLFlBQVksQ0FBRUMsU0FBUyxJQUFLO01BQ2pDLElBQUlBLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtRQUMvQkQsU0FBUyxHQUFHQSxTQUFTLENBQUNFLEtBQUssQ0FBQyxDQUFDLENBQUM7TUFDaEM7O01BRUE7TUFDQVIsTUFBTSxDQUFDUyxTQUFTLENBQUMsTUFBTTtRQUNyQixJQUFBQyx1QkFBYSxFQUFDVixNQUFNLEVBQUVDLE9BQU8sRUFBR1UsUUFBUSxJQUFLO1VBQzNDLElBQUFDLG9CQUFVLEVBQUNaLE1BQU0sRUFBRVcsUUFBUSxFQUFFVixPQUFPLEVBQUdZLEtBQUssSUFBSztZQUMvQ1gsUUFBUSxDQUFDLElBQUlZLHVCQUFnQixDQUFDO2NBQzVCVixZQUFZLEVBQUVBLFlBQVk7Y0FDMUJFLFNBQVMsRUFBRUEsU0FBUztjQUNwQkssUUFBUSxFQUFFQSxRQUFRO2NBQ2xCRSxLQUFLLEVBQUVBO1lBQ1QsQ0FBQyxDQUFDLENBQUM7VUFDTCxDQUFDLENBQUM7UUFDSixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSjtBQUFDLElBQUFFLFFBQUEsR0FFY2hCLFlBQVk7QUFBQWlCLE9BQUEsQ0FBQWxCLE9BQUEsR0FBQWlCLFFBQUE7QUFDM0JFLE1BQU0sQ0FBQ0QsT0FBTyxHQUFHakIsWUFBWSJ9